<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PICK.GG - LoL Pick Simulator</title>

<style>
/* === 기존 스타일 유지 (생략 없음) === */
:root{
--bg:#010a13;--box:#1e2328;--gold:#c8aa6e;--danger:#ff4444;
}
body{margin:0;background:#000;color:#eee;font-family:Segoe UI;display:flex;justify-content:center;align-items:center;min-height:100vh}
.container{width:100%;max-width:950px;background:var(--box);border:2px solid #463714;padding:40px}
.site-logo h1{color:var(--gold);font-size:3rem;margin:0}
.step{display:none}.step.active{display:block}
.btn{border:1px solid var(--gold);background:#111;color:var(--gold);padding:10px 25px;cursor:pointer}
.btn:hover{background:var(--gold);color:#000}
.champ-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:10px;height:420px;overflow:auto}
.champ-card{cursor:pointer;text-align:center}
.champ-card img{width:100%}
.recommend-card{display:flex;gap:15px;background:#181818;margin:10px 0;padding:15px;border-left:4px solid var(--gold)}
.recommend-card.wildcard{border-left-color:var(--danger);background:#251010}
.rec-score{margin-left:auto;font-size:20px;font-weight:bold}
</style>
</head>

<body>
<div class="container">

<div class="site-logo">
<h1>PICK.GG</h1>
<p>승리를 위한 베스트 픽 시뮬레이터</p>
</div>

<div id="step-1" class="step active">
<h2>라인 선택</h2>
<button class="btn" onclick="selectLane(event,'TOP')">TOP</button>
<button class="btn" onclick="selectLane(event,'JUNGLE')">JUNGLE</button>
<button class="btn" onclick="selectLane(event,'MID')">MID</button>
<button class="btn" onclick="selectLane(event,'ADC')">ADC</button>
<button class="btn" onclick="selectLane(event,'SUPPORT')">SUPPORT</button>
<br><br>
<button class="btn" onclick="goToStep(2)">다음</button>
</div>

<div id="step-2" class="step">
<h2>내 챔피언 풀</h2>
<div id="pool-grid" class="champ-grid"></div>
<button class="btn" onclick="goToStep(3)">밴</button>
</div>

<div id="step-3" class="step">
<h2>추천 결과</h2>
<button class="btn" onclick="getRecommendation()">추천 실행</button>
<div id="recommendation-list"></div>
</div>

</div>

<script>
/* ===============================
   상수 / 유틸
=============================== */
const DDRAGON="14.23.1";
const IMG=id=>`https://ddragon.leagueoflegends.com/cdn/${DDRAGON}/img/champion/${id}.png`;

function hashString(s){let h=2166136261;for(let i=0;i<s.length;i++){h^=s.charCodeAt(i);h=Math.imul(h,16777619)}return h>>>0}
function mulberry32(a){return()=>{a|=0;a=a+0x6D2B79F5|0;let t=Math.imul(a^a>>>15,1|a);t=t+Math.imul(t^t>>>7,61|t)^t;return((t^t>>>14)>>>0)/4294967296}}

/* ===============================
   챔피언 DB (요약본)
=============================== */
const DB=[
{id:'Malphite',name:'말파이트',roles:['TOP'],stats:{meta:8,ad_ap:0,tankiness:10,cc:9,safety:6},synergy:['Yasuo']},
{id:'Yasuo',name:'야스오',roles:['MID','TOP'],stats:{meta:6,ad_ap:10,tankiness:4,cc:5,safety:4},synergy:['Malphite']},
{id:'Ornn',name:'오른',roles:['TOP'],stats:{meta:9,ad_ap:3,tankiness:10,cc:9,safety:7},synergy:[]},
{id:'Zed',name:'제드',roles:['MID'],stats:{meta:6,ad_ap:10,tankiness:2,cc:1,safety:8},synergy:[]},
{id:'Vayne',name:'베인',roles:['ADC'],stats:{meta:5,ad_ap:10,tankiness:2,cc:3,safety:4},synergy:['Lulu']}
];

/* ===============================
   상태
=============================== */
let state={lane:null,pool:[]};

/* ===============================
   Step 로직
=============================== */
function selectLane(e,lane){
state={lane,pool:[]};
document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
document.getElementById('step-2').classList.add('active');
renderPool();
}

function goToStep(n){
document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
document.getElementById('step-'+n).classList.add('active');
}

/* ===============================
   Pool
=============================== */
function renderPool(){
const g=document.getElementById('pool-grid');
g.innerHTML='';
DB.filter(c=>c.roles.includes(state.lane)).forEach(c=>{
const d=document.createElement('div');
d.className='champ-card';
d.innerHTML=`<img src="${IMG(c.id)}"><div>${c.name}</div>`;
d.onclick=()=>{if(!state.pool.includes(c.id))state.pool.push(c.id);};
g.appendChild(d);
});
}

/* ===============================
   추천 엔진
=============================== */
function getRecommendation(){
const seedStr=state.lane+'|'+state.pool.join(',');
const rng=mulberry32(hashString(seedStr));
const list=document.getElementById('recommendation-list');
list.innerHTML='';

const ranked=DB.filter(c=>c.roles.includes(state.lane))
.map(c=>{
let score=c.stats.meta*2;
let bd={meta:c.stats.meta*2,gap:0,synergy:0,seed:0};

if(c.stats.tankiness>7){bd.gap+=30;score+=30}
if(state.pool.includes(c.id)){bd.synergy+=20;score+=20}
bd.seed+=rng()*5;score+=bd.seed;

return{c,score,bd};
}).sort((a,b)=>b.score-a.score);

ranked.slice(0,3).forEach((r,i)=>{
list.innerHTML+=`
<div class="recommend-card">
<img src="${IMG(r.c.id)}" width="64">
<div>
<b>BEST ${i+1}: ${r.c.name}</b><br>
<span style="font-size:12px;color:#aaa">
meta ${r.bd.meta} / gap ${r.bd.gap} / syn ${r.bd.synergy} / seed ${Math.round(r.bd.seed)}
</span>
</div>
<div class="rec-score">${Math.round(r.score)}</div>
</div>`;
});
}
</script>
</body>
</html>
